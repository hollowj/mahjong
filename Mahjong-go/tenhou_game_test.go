package mahjong

import (
	"testing"
)

// TestTenhouGame 使用在 C++ 测试中给定的牌山重放一次对局，确保能正常运行
func TestTenhouGame(t *testing.T) {
	// 由 C++ main.cpp 中给出的牌山（hardcoded）
	yama := []int{68, 61, 62, 12, 107, 93, 65, 36, 121, 8, 79, 118, 19, 3, 59, 106, 84, 85, 38, 0, 51, 86, 16, 102, 122, 124, 82, 135, 128, 78, 56, 22, 69, 30, 47, 94, 113, 48, 134, 66, 27, 23, 54, 132, 114, 133, 64, 112, 40, 57, 125, 115, 55, 83, 37, 126, 70, 75, 21, 50, 96, 10, 11, 119, 52, 110, 33, 131, 95, 109, 29, 111, 92, 58, 41, 7, 31, 98, 88, 120, 28, 127, 53, 97, 90, 108, 44, 99, 74, 15, 117, 105, 101, 87, 35, 32, 17, 81, 25, 45, 72, 49, 130, 26, 13, 63, 20, 60, 9, 80, 18, 34, 77, 39, 116, 2, 104, 6, 76, 42, 129, 4, 5, 14, 73, 100, 103, 71, 46, 123, 43, 89, 91, 67, 24, 1}

	table := NewTable()
	pr := NewPaipuReplayer(table)
	pr.InitWithYama(yama)

	// 执行完整模拟（会使用导入的牌山）
	res := pr.SimulateToCompletion()
	if res == nil {
		t.Fatalf("Tenhou replay simulation returned nil result")
	}
}
